[01:12:25.405] [32mINFO[39m (18356): [36mğŸ”— Redis conectado exitosamente[39m
[01:12:25.417] [32mINFO[39m (18356): [36mğŸš€ Redis listo para usar[39m
[01:12:25.087] [32mINFO[39m (18356): [36mğŸ”— Inicializando conexiÃ³n Redis...[39m
Inicializando conexiÃ³n con Supabase...
âœ… ConexiÃ³n con Supabase establecida exitosamente
[01:12:26.179] [32mINFO[39m (18356): [36mğŸš€ Iniciando Worker Manager y Replication Detector...[39m
ğŸš€ Iniciando Worker Manager
ğŸ“Š ConfiguraciÃ³n: 2-8 workers
âœ… Worker 1 iniciado
âœ… Worker 2 iniciado
âœ… Worker Manager iniciado
ğŸ” Iniciando detector de trades (solo detecciÃ³n)
âœ… Detector iniciado (polling cada 2s)
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 5.0.14.1
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 5.0.14.1
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 5.0.14.1
It is highly recommended to use a minimum Redis version of 6.2.0
             Current: 5.0.14.1
ğŸš€ Iniciando sistema de replicaciÃ³n con polling cada 2 segundos
ğŸ”„ [INIT] Inicializando cache de posiciones...
ğŸ”„ Inicializando cache de posiciones abiertas...
ğŸ“Š Inicializando cache para 1 masters
[01:12:27.664] [32mINFO[39m (18356): [36mâœ… Worker Manager y Detector iniciados correctamente[39m
[01:12:27.823] [32mINFO[39m (18356): [36mğŸš€ AGM Logic Backend Enterprise running on port 8080[39m
[01:12:27.823] [32mINFO[39m (18356): [36mğŸ“Š Database: SUPABASE[39m
[01:12:27.823] [32mINFO[39m (18356): [36mğŸ”’ Security: ENABLED[39m
[01:12:27.823] [32mINFO[39m (18356): [36mğŸ“ˆ Metrics: ENABLED[39m
[01:12:27.826] [32mINFO[39m (18356): [36mğŸ’¾ Redis: CONNECTED[39m
[01:12:27.826] [32mINFO[39m (18356): [36mğŸ”— Python API: https://apekapital.com:444/api/v1[39m
[01:12:27.826] [32mINFO[39m (18356): [36mğŸš€ Iniciando servicio de replicaciÃ³n...[39m
ğŸ“Š [Detector] 1 masters activos, 1 relaciones
âœ… Master 101308: 2 posiciones en cache
âœ… Cache de posiciones inicializado
âœ… [INIT] Cache inicializado correctamente
ğŸ” Window de bÃºsqueda: 7200 segundos
ğŸ›¡ï¸ DeduplicaciÃ³n de deals: ACTIVADA
[RedisSubscriber] Connected to Redis
[RedisSubscriber] Redis client ready
[RedisSubscriber] Redis Subscriber initialized successfully
[RedisSubscriber] âœ… Subscribed to channel: copy-trading:new-deal
âœ… Redis Pub/Sub connected - listening on copy-trading:new-deal
ğŸš€ Real-time replication enabled (<1s latency)
[2025-10-10T04:12:30.236Z] ğŸ” Buscando nuevas operaciones para replicar...
ğŸ“Š Procesando 1 relaciones activas
ğŸ”„ Actualizando cache para 1 masters
âœ… Cache actualizado: dfe5c068-bddf-419d-b816-08303dd276ea -> 101308
ğŸ‘¥ Masters Ãºnicos a consultar: 1
ğŸ“¡ Consultando trades del master 101308
â³ DetecciÃ³n anterior en proceso, omitiendo ciclo
â³ El sondeo anterior aÃºn estÃ¡ en proceso. Omitiendo este ciclo.
â³ DetecciÃ³n anterior en proceso, omitiendo ciclo
â³ El sondeo anterior aÃºn estÃ¡ en proceso. Omitiendo este ciclo.
ğŸ†• [Detector] 3 trades nuevos de master 101308
ğŸ“¦ [Detector] Encolando trade: {
  "ticket": 158808,
  "symbol": "AUDSGDc",
  "type": "BUY"
}
ğŸ“¦ [Detector] Encolando trade: {
  "position_id": 158909,
  "ticket": 158909,
  "event_type": "POSITION_OPENED",
  "symbol": "AUDNOKc"
}
â³ Job 1 esperando en cola
â³ Job 2 esperando en cola
ğŸ“¦ [Detector] Encolando trade: {
  "position_id": 158936,
  "ticket": 158936,
  "event_type": "POSITION_OPENED",
  "symbol": "AUDNOKc"
}
â³ Job 3 esperando en cola
âœ¨ [Detector] Ciclo completado en 5341ms. 3 trades encolados
ğŸ“Š [Detector] 1 masters activos, 1 relaciones
â³ El sondeo anterior aÃºn estÃ¡ en proceso. Omitiendo este ciclo.
ğŸ“Š Estado: 2 workers | Cola: 3 jobs (3 waiting, 0 active)
â³ DetecciÃ³n anterior en proceso, omitiendo ciclo
â³ El sondeo anterior aÃºn estÃ¡ en proceso. Omitiendo este ciclo.
ğŸ”„ [Worker] Procesando trade AUDNOKc para 1 followers
ğŸ” DEBUG masterTrade object: {
  "position_id": 158909,
  "ticket": 158909,
  "symbol": "AUDNOKc",
  "action": 0,
  "volume": 0.01,
  "price_open": 6.6182,
  "price_current": 6.6061,
  "sl": 0,
  "tp": 0,
  "profit": -0.012,
  "time_open": 1760071395,
  "comment": "",
  "event_type": "POSITION_OPENED"
}
ğŸ” DEBUG masterPositionId extracted: 158909
ğŸ”„ [Worker] Procesando trade AUDSGDc para 1 followers
ğŸ” DEBUG masterTrade object: {
  "ticket": 158808,
  "login": 101308,
  "symbol": "AUDSGDc",
  "type": "BUY",
  "volume": 0.01,
  "open_price": 0.85307,
  "close_price": 0.85307,
  "open_time": "2025-10-10T04:09:41+00:00",
  "close_time": "2025-10-10T04:09:41+00:00",
  "stop_loss": 0,
  "take_profit": 0,
  "profit": 0,
  "swap": 0,
  "commission": -0.07,
  "comment": "",
  "status": "OPEN"
}
ğŸ” DEBUG masterPositionId extracted: 158808
ğŸ”„ [Worker] Procesando trade AUDNOKc para 1 followers
ğŸ” DEBUG masterTrade object: {
  "position_id": 158936,
  "ticket": 158936,
  "symbol": "AUDNOKc",
  "action": 0,
  "volume": 0.01,
  "price_open": 6.6144,
  "price_current": 6.6061,
  "sl": 0,
  "tp": 0,
  "profit": -0.008199999999999999,
  "time_open": 1760072143,
  "comment": "",
  "event_type": "POSITION_OPENED"
}
ğŸ” DEBUG masterPositionId extracted: 158936
â³ DetecciÃ³n anterior en proceso, omitiendo ciclo
â³ El sondeo anterior aÃºn estÃ¡ en proceso. Omitiendo este ciclo.
âœ… 11 nuevos trades encontrados para master 101308
ğŸš€ REPLICACIÃ“N INSTANTÃNEA: CADCHFc para 1 followers
ğŸ“¤ Sending OPEN trade to follower 101383: {
  symbol: 'CADCHFc',
  volume: 0.01,
  type: 'sell',
  follower_account: '101383',
  risk_ratio: 1,
  open_price: undefined,
  stop_loss: 0,
  take_profit: 0,
  comment: 'Copy from master'
}
ğŸ”— Calling URL: https://apekapital.com:444/api/v1/trading/replicate
âœ… Trade ejecutado en follower 101383: ticket 3629039777
ğŸ’¾ [SAVE] masterPositionId: 158909, masterTrade.position_id: 158909, masterTrade.ticket: 158909
ğŸ’¾ [SAVE] Full masterTrade: {
  "position_id": 158909,
  "ticket": 158909,
  "symbol": "AUDNOKc",
  "action": 0,
  "volume": 0.01,
  "price_open": 6.6182,
  "price_current": 6.6061,
  "sl": 0,
  "tp": 0,
  "profit": -0.012,
  "time_open": 1760071395,
  "comment": "",
  "event_type": "POSITION_OPENED"
}
âœ… Trade ejecutado en follower 101383: ticket 3629039778
ğŸ’¾ [SAVE] masterPositionId: 158808, masterTrade.position_id: undefined, masterTrade.ticket: 158808
ğŸ’¾ [SAVE] Full masterTrade: {
  "ticket": 158808,
  "login": 101308,
  "symbol": "AUDSGDc",
  "type": "BUY",
  "volume": 0.01,
  "open_price": 0.85307,
  "close_price": 0.85307,
  "open_time": "2025-10-10T04:09:41+00:00",
  "close_time": "2025-10-10T04:09:41+00:00",
  "stop_loss": 0,
  "take_profit": 0,
  "profit": 0,
  "swap": 0,
  "commission": -0.07,
  "comment": "",
  "status": "OPEN"
}
âœ… Trade ejecutado en follower 101383: ticket 3629039779
ğŸ’¾ [SAVE] masterPositionId: 158936, masterTrade.position_id: 158936, masterTrade.ticket: 158936
ğŸ’¾ [SAVE] Full masterTrade: {
  "position_id": 158936,
  "ticket": 158936,
  "symbol": "AUDNOKc",
  "action": 0,
  "volume": 0.01,
  "price_open": 6.6144,
  "price_current": 6.6061,
  "sl": 0,
  "tp": 0,
  "profit": -0.008199999999999999,
  "time_open": 1760072143,
  "comment": "",
  "event_type": "POSITION_OPENED"
}
âœ… Trade executed on follower 101383: {
  success: true,
  ticket: 3629039780,
  execution_time: 0.032997846603393555,
  error: null
}
ğŸ“Š Response status: 200
âš ï¸ Error guardando trade en Supabase: {
  code: '23502',
  details: 'Failing row contains (4239e449-110f-492c-b138-385e0e844361, 7a5a56a9-c71d-48d0-b66a-400de84b829b, 101383, 3629039778, AUDSGDc, sell, 0.01, null, null, 0.00000, 0.00000, 0.00, 0.00, 0.00, open, 2025-10-10 04:12:41.261+00, null, Copy from master  position 158808, 2025-10-10 04:12:41.261+00, 2025-10-10 04:12:41.261+00, 158808).',
  hint: null,
  message: 'null value in column "open_price" of relation "trades" violates not-null constraint'
}
âœ… [Worker] Completado: 1/1 exitosos
ğŸ’¾ Trade 3629039779 guardado en Supabase
âœ… [Worker] Completado: 1/1 exitosos
ğŸ’¾ Trade 3629039777 guardado en Supabase
âœ… [Worker] Completado: 1/1 exitosos
âœ… Worker completÃ³ job 1
âœ… Worker completÃ³ job 3
âœ… Worker completÃ³ job 2
âš ï¸ Error guardando trade en Supabase: {
  code: '23502',
  details: 'Failing row contains (83343d69-b4b9-4b18-9f6a-36e50adbd574, 7a5a56a9-c71d-48d0-b66a-400de84b829b, 101383, 3629039780, CADCHFc, sell, 0.01, null, null, 0.00000, 0.00000, 0.00, 0.00, 0.00, open, 2025-10-10 04:12:41.285+00, null, Copy from master, 2025-10-10 04:12:41.285+00, 2025-10-10 04:12:41.285+00, null).',
  hint: null,
  message: 'null value in column "open_price" of relation "trades" violates not-null constraint'
}
âœ… Replicado a 1/1 followers en tiempo real
ğŸš€ REPLICACIÃ“N INSTANTÃNEA: AUDSEKc para 1 followers
ğŸ“¤ Sending OPEN trade to follower 101383: {
  symbol: 'AUDSEKc',
  volume: 0.01,
  type: 'sell',
  follower_account: '101383',
  risk_ratio: 1,
  open_price: undefined,
  stop_loss: 0,
  take_profit: 0,
  comment: 'Copy from master'
}
ğŸ”— Calling URL: https://apekapital.com:444/api/v1/trading/replicate
ğŸ“Š [Detector] 1 masters activos, 1 relaciones
â³ El sondeo anterior aÃºn estÃ¡ en proceso. Omitiendo este ciclo.
â³ DetecciÃ³n anterior en proceso, omitiendo ciclo
â³ El sondeo anterior aÃºn estÃ¡ en proceso. Omitiendo este ciclo.
âœ… Trade executed on follower 101383: {
  success: true,
  ticket: 3629039781,
  execution_time: 0.04000592231750488,
  error: null
}
ğŸ“Š Response status: 200
âš ï¸ Error guardando trade en Supabase: {
  code: '23502',
  details: 'Failing row contains (2024bb7d-f20c-4ef0-a734-0d5cfcaebfd1, 7a5a56a9-c71d-48d0-b66a-400de84b829b, 101383, 3629039781, AUDSEKc, sell, 0.01, null, null, 0.00000, 0.00000, 0.00, 0.00, 0.00, open, 2025-10-10 04:12:45.188+00, null, Copy from master, 2025-10-10 04:12:45.188+00, 2025-10-10 04:12:45.188+00, null).',
  hint: null,
  message: 'null value in column "open_price" of relation "trades" violates not-null constraint'
}
âœ… Replicado a 1/1 followers en tiempo real
ğŸš€ REPLICACIÃ“N INSTANTÃNEA: BTCUSD para 1 followers
ğŸ“¤ Sending OPEN trade to follower 101383: {
  symbol: 'BTCUSD',
  volume: 0.01,
  type: 'sell',
  follower_account: '101383',
  risk_ratio: 1,
  open_price: undefined,
  stop_loss: 0,
  take_profit: 0,
  comment: 'Copy from master'
}
ğŸ”— Calling URL: https://apekapital.com:444/api/v1/trading/replicate
ğŸ“Š [Detector] 1 masters activos, 1 relaciones